# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/pinctrl/ultrarisc,dp1000-pinctrl.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: UltraRISC DP1000 Pin Controller
maintainers:
  - Jia Wang <wangjia@ultrarisc.com>

description: |
  UltraRISC RISC-V SoC DP1000 pin controller.
  <dt-bindings/pinctrl/ur-dp1000-pinctrl.h> contains the pinmux definitions.

properties:
  compatible:
    const: ultrarisc,dp1000-pinctrl

  reg:
    maxItems: 1

  pinctrl-single,register-width:
    description:
      The width of the register used to configure the pinmux.
    $ref: /schemas/types.yaml#/definitions/uint32
    enum: [32]

  pinctrl-single,function-mask:
    description:
      The mask of the functions that can be selected for the pinmux.
    $ref: /schemas/types.yaml#/definitions/uint32
    enum: [0x3ff]

  pinctrl-use-default:
    description:
      If this property is set, the pinmux will be set to the default value.
    type: boolean

patternProperties:
  '^[a-zA-Z0-9_]+$':
    type: object
    additionalProperties: false
    patternProperties:
      '-pins$':
        type: object
        description: |
          A pinctrl node should contain at least one subnode representing the
          pinctrl groups available on the machine. Each subnode will list the
          pins it needs, and how they should be configured, with regard to
          muxer configuration, bias etc.
        properties:
          pinctrl-pins:
            description:
              The list of Pins and their mux settings that properties in the
              node apply to. The format: `PORT  PIN  FUNCTION`.
            minItems: 1
            maxItems: 32
            items:
              $ref: /schemas/types.yaml#/definitions/uint32
          pinconf-pins:
            description:
              The list of Pins and their bias settings that properties in the
              node apply to. The format: `PORT  PIN  BIAS`.The BIAS should be
              set using the UR_DP1000_BIAS macros.
            minItems: 1
            maxItems: 32
            items:
              $ref: /schemas/types.yaml#/definitions/uint32

examples:
  - |
    pmx0: pinmux@40000000 {
      compatible = "ultrarisc,dp1000-pinctrl";
      reg = <0x0 0x11081000  0x0 0x1000>;
      #address-cells = <1>;
      #size-cells = <0>;
      #pinctrl-cells = <2>;
      pinctrl-single,register-width = <32>;
      pinctrl-single,function-mask = <0x3ff>;
      pinctrl-use-default;

      i2c0_pins: i2c0_pins {
        pinctrl-pins = <
          UR_DP1000_IOMUX_A  12  UR_FUNC0
          UR_DP1000_IOMUX_A  13  UR_FUNC0
          >;

        pinconf-pins = <
          UR_DP1000_IOMUX_A  12  UR_DP1000_BIAS(UR_PULL_UP, UR_DRIVE_DEF)
          UR_DP1000_IOMUX_A  13  UR_DP1000_BIAS(UR_PULL_UP, UR_DRIVE_DEF)
          >;
      };

      i2c1_pins: i2c1_pins {
        pinctrl-pins = <
          UR_DP1000_IOMUX_B  6  UR_FUNC0
          UR_DP1000_IOMUX_B  7  UR_FUNC0
          >;

        pinconf-pins = <
          UR_DP1000_IOMUX_B  6  UR_DP1000_BIAS(UR_PULL_UP, UR_DRIVE_DEF)
          UR_DP1000_IOMUX_B  7  UR_DP1000_BIAS(UR_PULL_UP, UR_DRIVE_DEF)
          >;
      };
    };
